import React from 'react';
import data from '../../data/featured.json';
import search_pad from '../../assets/search_pad.jpg';

const EditorialRow = () => {

    const handleLinkClick = (linkout, e) => {
        e.preventDefault();
        window.open(linkout, '_blank');
    };
    const handleVisualSearch = (e) => {
        e.preventDefault();
        window.scrollTo(0, 0);
    };

    const buildArticleList = () => {
        let componentList = [];
        data.map((article, idx) => {
            if (idx <= 5 || idx >= 10) return null;
            let currentObj = {
                title: article.title,
                categories: article.categories,
                link: article.link,
                content: article.contentSnippet
            }
            componentList.push(currentObj);
            return null;
        });

        return (
            componentList.length > 0 && (
                componentList.map((article, i) => (
                    <div
                        className='featured-article-list-item'
                        onClick={(e) => handleLinkClick(article.link, e)}
                        key={`featured-article-list-item-${i}`}
                    >
                        <div className='article-title title-hover'>{article.title}</div>
                        <div className='keyword-link-container bottom-border'>
                            {article.categories.map((category, j) => (
                                <div className='keyword-link' key={`category-item-${j}`}>
                                    <a
                                        className='category-item'
                                        href={article.link}
                                    >
                                        <span>{category}</span>
                                    </a>
                                </div>
                            ))}
                        </div>
                    </div>
                ))
            )
        )
    };

    return (
        <div className='feed-row row__container'>
            <div className='row-title'>Editorial</div>
            {data && (
                <div className='row-content'>
                    <div className='editorial-article-container' onClick={(e) => handleVisualSearch(e)}>
                        <div className='editorial-article-title'>Find Credit Using our Visual Search Tool</div>
                        <img className='editorial-article-img' src={search_pad} alt='editorial-article-img' />
                    </div>
                    <div className='editorial-article-list'>
                        {buildArticleList()}
                    </div>
                </div>
            )}
        </div>
    )
};

export default EditorialRow;