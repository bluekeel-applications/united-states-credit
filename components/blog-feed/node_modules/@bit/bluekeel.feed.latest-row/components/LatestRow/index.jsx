import React from 'react';
import { getSrcFromHtml, trimSnippet } from '../../utils/helperz';
import data from '../../data/latest.json';

const LatestRow = () => {

    const handleLinkClick = (linkout, e) => {
        e.preventDefault();
        window.open(linkout, '_blank');
    };

    const ArticleList = () => {
        let componentList = [];
        data.map((article, idx) => {
            if (idx >= 4) return null;
            let currentObj = {
                title: article.title,
                categories: article.categories,
                link: article.link,
                content: article.contentSnippet,
                html: article.content
            }
            componentList.push(currentObj);
            return null;
        });

        return (
            componentList.map((article, i) => (
                <div
                    key={`latest-article-${i}`}
                    className='latest-article-row'
                    onClick={(e) => handleLinkClick(article.link, e)}
                >
                    <div className='latest-item-title-column'>
                        <div className='article-title'>{article.title}</div>
                        <div className='keyword-link-container tags-left'>
                            {article.categories.map((category, j) => (
                                <div className='keyword-link' key={`category-item-${j}`}>
                                    <a className='category-item' href={`https://unitedstatescredit.blog/2018/11/06/earn-100s-by-opening-up-an-online-checking-account-3/`}>
                                        <span>{category}</span>
                                    </a>
                                </div>
                            ))}
                        </div>
                    </div>
                    <div className='text-column'>{trimSnippet(article.content)}</div>
                    <div className='image-column'><img className='latest-image' src={getSrcFromHtml(article.html, true, 'lg')} alt={`list-${i}`} /></div>
                </div>
            ))
        )
    };

    return (
        <div className='feed-row row__container'>
            <div className='bottom-border row-title'>The Latest</div>
            <div className='row-content-column'>
                <ArticleList />
            </div>
        </div>
    )
};

export default LatestRow;